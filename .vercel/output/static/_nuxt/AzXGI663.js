import{_ as I}from"./D_Ip9zNA.js";import{_ as K}from"./0-e7FVdg.js";import{f as D,N as q,h as C,o as v,O as H,p as Q,w as d,L as Y,P as W,Q as X,g as a,_ as Z,C as ee,r as k,c as j,a as o,B as te,b as r,t as V,k as ae,G as oe}from"./BVdw5vJQ.js";import{_ as le}from"./imMYxLiP.js";import{_ as re}from"./Cs7KMubB.js";import{u as ne,r as c}from"./COQxO7zj.js";import{u as se}from"./DOzJKxRB.js";import{u as ie}from"./BFX_Otd8.js";import{f as me}from"./C__g2RLv.js";import"./BSNo9jaY.js";import"./C3LguLNo.js";import"./D9ImkJXs.js";import"./Bish5eGS.js";import"./DOwuRLCg.js";import"./C97eXVNd.js";import"./C0tuFO62.js";import"./9dOsKKNX.js";import"./Dq2jcSPC.js";import"./BwKW8Zfl.js";import"./f51bCrOI.js";import"./CCYVfaL6.js";import"./CovN8vff.js";const ue={__name:"FormGroup",props:{ui:{type:Object,default:()=>({})}},setup(w){const x=w,u={wrapper:"flex gap-11",container:"flex-1",label:{wrapper:"pt-3",base:"font-normal text-black/55 text-base w-24 text-right text-sm"}},t=D(()=>q(x.ui,u));return(f,_)=>{const p=K;return v(),C(p,{ui:a(t)},H({_:2},[Q(f.$slots,(g,b)=>({name:b,fn:d(h=>[Y(f.$slots,b,W(X(h)))])}))]),1032,["ui"])}}},pe={class:"flex divide-x items-start"},de={key:0,class:"profile-item-text"},ce={class:"profile-item"},fe={class:"flex gap-2 items-center"},_e={class:"profile-item-text"},ge={class:"profile-item"},be={class:"flex gap-2 items-center"},ve={class:"profile-item-text"},xe={class:"mt-4"},he={class:"w-72 pl-6 flex flex-col items-center gap-5"},$e={__name:"index",setup(w){const x=se(),{profile:u}=ee(x),t=k({...JSON.parse(JSON.stringify(u.value)),birth_date:u.value.birth_date?new Date(u.value.birth_date):null}),f={name:{required:c},username:{required:c},store_name:{required:c},gender:{required:c},photo_url:{},birth_date:{required:c}},_=k({}),p=ne(f,t,{$autoDirty:!0,$externalResults:_}),g=k(),b=D(()=>t.value.photo_url&&typeof t.value.photo_url!="string"?window.URL.createObjectURL(t.value.photo_url):u.value.photo_url);function h(){g.value.value=null,g.value.click()}function O($){var s,l;const e=(l=(s=$.target)==null?void 0:s.files)==null?void 0:l[0],i=[".jpeg",".png"],n=e.name.split(".").pop();if(!i.includes(`.${n}`)){alert(`Format file tidak didukung. Silakan upload file ${props.accept}`);return}if(e.size>1024e3){alert("File size melebihi ketentuan");return}t.value.photo_url=e}const{execute:R,status:M,error:U}=ie("/server/api/profile");async function T(){var n,s;if(_.value={},!await p.value.$validate())return;const e={name:t.value.name,email:t.value.email,username:t.value.username,store_name:t.value.store_name,gender:t.value.gender,birth_date:t.value.birth_date?me(t.value.birth_date,"Y-MM-d"):void 0,_method:"PATCH",photo:t.value.photo_url||void 0},i=new FormData;if(Object.keys(e).forEach(l=>{(l==="photo"&&e[l]&&typeof e[l]=="object"||l!=="photo"&&e[l]!==void 0)&&i.append(l,e[l])}),await R(i),U.value){_.value=((s=(n=U.value.data)==null?void 0:n.meta)==null?void 0:s.validations)||{};return}window.location.reload()}return($,e)=>{var y,P,S,F,z,B,E,G,L,N;const i=I,n=ue,s=ae,l=le,A=re,J=oe;return v(),j("div",null,[e[8]||(e[8]=o("h3",{class:"font-medium text-lg"},"Profil Saya",-1)),e[9]||(e[9]=o("p",{class:"text-sm text-black/65"}," Kelola informasi profil Anda untuk mengontrol, melindungi dan mengamankan akun ",-1)),e[10]||(e[10]=o("hr",{class:"mt-5 mb-8 border-gray-200/60"},null,-1)),o("div",pe,[o("form",{class:"flex-1 pr-6 flex flex-col gap-8",onSubmit:te(T,["prevent"])},[r(n,{label:"Username",error:(P=(y=a(p).username.$errors)==null?void 0:y[0])==null?void 0:P.$message},{default:d(()=>[a(u).username?(v(),j("span",de,V(a(u).username||"-"),1)):(v(),C(i,{key:1,modelValue:a(t).username,"onUpdate:modelValue":e[0]||(e[0]=m=>a(t).username=m),class:"flex-1",size:"lg"},null,8,["modelValue"]))]),_:1},8,["error"]),r(n,{label:"Nama",error:(F=(S=a(p).name.$errors)==null?void 0:S[0])==null?void 0:F.$message},{default:d(()=>[r(i,{modelValue:a(t).name,"onUpdate:modelValue":e[1]||(e[1]=m=>a(t).name=m),class:"flex-1",size:"lg"},null,8,["modelValue"])]),_:1},8,["error"]),o("div",ce,[e[5]||(e[5]=o("p",{class:"profile-item-title"},"Email",-1)),o("div",fe,[o("span",_e,V(a(t).email||"-"),1),r(s,{variant:"link",color:"blue",class:"underline",label:"Ubah",padded:!1,to:"/my-account/profile/change-email"})])]),o("div",ge,[e[6]||(e[6]=o("p",{class:"profile-item-title"},"Nomor Telepon",-1)),o("div",be,[o("span",ve,V(a(t).phone||"-"),1),r(s,{variant:"link",color:"blue",class:"underline",label:"Ubah",padded:!1,to:"/my-account/profile/change-phone"})])]),r(n,{label:"Nama Toko",error:(B=(z=a(p).store_name.$errors)==null?void 0:z[0])==null?void 0:B.$message},{default:d(()=>[r(i,{modelValue:a(t).store_name,"onUpdate:modelValue":e[2]||(e[2]=m=>a(t).store_name=m),class:"flex-1",size:"lg"},null,8,["modelValue"])]),_:1},8,["error"]),r(n,{label:"Jenis Kelamin",error:(G=(E=a(p).gender.$errors)==null?void 0:E[0])==null?void 0:G.$message,ui:{label:{wrapper:"items-center"}}},{default:d(()=>[r(l,{modelValue:a(t).gender,"onUpdate:modelValue":e[3]||(e[3]=m=>a(t).gender=m),options:["Laki-Laki","Perempuan","Lainnya"],class:"flex-1",size:"lg",ui:{fieldset:"flex gap-3"}},null,8,["modelValue"])]),_:1},8,["error"]),r(n,{label:"Tanggal Lahir",error:(N=(L=a(p).birth_date.$errors)==null?void 0:L[0])==null?void 0:N.$message},{default:d(()=>[r(A,{modelValue:a(t).birth_date,"onUpdate:modelValue":e[4]||(e[4]=m=>a(t).birth_date=m)},null,8,["modelValue"])]),_:1},8,["error"]),o("div",xe,[r(s,{type:"submit",loading:a(M)==="pending",label:"Simpan"},null,8,["loading"])])],32),o("div",he,[r(J,{src:a(b),size:"3xl",alt:a(t).name,icon:"i-heroicons-user","img-class":"object-cover"},null,8,["src","alt"]),r(s,{label:"Pilih Gambar",color:"white",onClick:h}),o("input",{ref_key:"inputFileElement",ref:g,type:"file",accept:".jpeg,.png",class:"hidden",onChange:O},null,544),e[7]||(e[7]=o("ul",{class:"text-sm font-normal text-black/55"},[o("li",null,"Ukuran gambar: maks. 1 MB"),o("li",null,"Format gambar: .JPEG, .PNG")],-1))])])])}}},Je=Z($e,[["__scopeId","data-v-036554cf"]]);export{Je as default};
