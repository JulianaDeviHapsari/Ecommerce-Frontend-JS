import{_ as S}from"./D_Ip9zNA.js";import{m as k,r as _,c as h,a as l,b as i,w as N,g as o,B as U,o as b,i as C,t as H,k as D}from"./BVdw5vJQ.js";import{_ as R}from"./0-e7FVdg.js";import{u as j,n as q,r as z}from"./COQxO7zj.js";import{u as A}from"./DOzJKxRB.js";import{u as E}from"./BFX_Otd8.js";import"./BSNo9jaY.js";import"./CCYVfaL6.js";const F={key:0,class:"text-sm text-red-500 mt-1"},Q={__name:"change-phone",setup(G){const n=A(),v=k(),t=_({phone:""}),x={phone:{required:z,numeric:q}},s=_({}),a=j(x,t,{$autoDirty:!0,$externalResults:s}),{execute:g,status:u,error:m}=E("/server/api/profile");async function $(){var e,r;if(s.value={},!!await a.value.$validate()){if(await g({phone:t.value.phone,email:n.profile.email,gender:n.profile.gender,name:n.profile.name,_method:"PATCH"}),m.value){s.value=((r=(e=m.value.data)==null?void 0:e.meta)==null?void 0:r.validations)||{};return}u.value==="success"&&(n.profile.phone=t.value.phone,v.replace("/my-account/profile"))}}return(w,e)=>{var p,d;const r=S,V=D,y=R;return b(),h("div",null,[e[1]||(e[1]=l("h3",{class:"text-xl font-medium"},"Ubah No. Handphone",-1)),e[2]||(e[2]=l("hr",{class:"mt-5 mb-11 border-gray-200/60"},null,-1)),l("form",{onSubmit:U($,["prevent"])},[i(y,{label:"No. Handphone Baru",ui:{wrapper:"flex gap-16",container:"w-96",label:{wrapper:"pt-2",base:"font-normal text-black/55 text-base w-28"}},error:!!((d=(p=o(a).phone.$errors)==null?void 0:p[0])!=null&&d.$message)},{default:N(()=>{var c,f;return[i(r,{modelValue:o(t).phone,"onUpdate:modelValue":e[0]||(e[0]=B=>o(t).phone=B),size:"lg"},null,8,["modelValue"]),o(a).$invalid?(b(),h("p",F,H((f=(c=o(a).phone.$errors)==null?void 0:c[0])==null?void 0:f.$message),1)):C("",!0),i(V,{type:"submit",label:"Selanjutnya",class:"mt-8",loading:o(u)==="pending",disabled:o(a).$invalid},null,8,["loading","disabled"])]}),_:1},8,["error"])],32)])}}};export{Q as default};
