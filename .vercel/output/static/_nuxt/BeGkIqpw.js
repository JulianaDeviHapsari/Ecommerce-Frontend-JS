import{_ as $,c as u,o as r,a as i,q as pe,l as _e,y as ge,m as fe,r as W,J as ye,f as Y,v as ve,U as xe,h as C,w as x,b as a,g as t,k as ke,d as p,F as k,p as w,i as ee,t as V}from"./BVdw5vJQ.js";import{_ as he}from"./D_Ip9zNA.js";import{_ as Ce}from"./DF4dXhcg.js";import{_ as we}from"./BPDoLG8j.js";import{_ as Ve}from"./CnIjBAtT.js";import{_ as $e}from"./BkpUadhd.js";import{_ as be}from"./MFBl4QUC.js";import{u as te}from"./CCYVfaL6.js";import"./BSNo9jaY.js";import"./0kcxaRLk.js";import"./CX-HCZMl.js";import"./DOzJKxRB.js";const qe={},Ue={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"};function Me(b,c){return r(),u("svg",Ue,[...c[0]||(c[0]=[i("path",{d:"M4.39922 10.5668V4.6468L1.19922 0.966797H10.7992L7.59922 4.6468V8.1668",stroke:"black","stroke-opacity":"0.8","stroke-width":"0.8","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])}const Be=$(qe,[["render",Me]]),He={},Se={xmlns:"http://www.w3.org/2000/svg",width:"17",height:"22",viewBox:"0 0 17 22",fill:"none"};function Ae(b,c){return r(),u("svg",Se,[...c[0]||(c[0]=[pe('<path d="M6.29613 18.9416H10.9076C11.3624 18.9416 11.7311 18.5878 11.7311 18.1515C11.7311 17.7151 11.3624 17.3613 10.9076 17.3613H6.29613C5.84134 17.3613 5.47266 17.7151 5.47266 18.1515C5.47266 18.5878 5.84134 18.9416 6.29613 18.9416Z" fill="#555555"></path><path d="M7.6862 21.3127H9.55286C9.92105 21.3127 10.2195 20.9589 10.2195 20.5225C10.2195 20.0862 9.92105 19.7324 9.55286 19.7324H7.6862C7.31801 19.7324 7.01953 20.0862 7.01953 20.5225C7.01953 20.9589 7.31801 21.3127 7.6862 21.3127Z" fill="#555555"></path><path d="M7.73047 8.13667V12.2848C7.73047 12.6666 8.08864 12.9762 8.53047 12.9762C8.9723 12.9762 9.33047 12.6666 9.33047 12.2848V8.13667C9.33047 7.75484 8.9723 7.44531 8.53047 7.44531C8.08864 7.44531 7.73047 7.75484 7.73047 8.13667Z" fill="#555555"></path><path d="M7.73047 5.07528V5.86541C7.73047 6.30178 8.08864 6.65553 8.53047 6.65553C8.9723 6.65553 9.33047 6.30178 9.33047 5.86541V5.07528C9.33047 4.63891 8.9723 4.28516 8.53047 4.28516C8.08864 4.28516 7.73047 4.63891 7.73047 5.07528Z" fill="#555555"></path><path d="M8.3543 0.333984C4.03268 0.333984 0.53125 3.87058 0.53125 8.23522C0.53125 9.74119 0.954518 11.1413 1.68247 12.336L3.90751 15.871C4.17597 16.2961 4.65688 16.5552 5.17402 16.5552H11.5543C12.1835 16.5552 12.7648 16.2281 13.0679 15.7003L15.1348 12.1258C15.7936 10.9801 16.1773 9.65586 16.1773 8.23522C16.1773 3.87058 12.6743 0.333984 8.3543 0.333984ZM8.3543 1.91423C11.7586 1.91423 14.5304 4.74919 14.5304 8.23522C14.5304 9.34139 14.2488 10.3954 13.6954 11.3594L11.6284 14.9339C11.6136 14.9592 11.5856 14.975 11.5543 14.975H5.2679L3.1038 11.5395C2.49772 10.544 2.17821 9.40144 2.17821 8.23522C2.17821 4.74919 4.94839 1.91423 8.3543 1.91423Z" fill="#555555"></path>',5)])])}const Le=$(He,[["render",Ae]]),Ne={class:"search-filter"},Fe={class:"filter-title"},Te={class:"filter-item"},Pe={class:"flex gap-2 items-center"},Ze={class:"filter-item"},Ie={class:"flex flex-col gap-2"},Re={class:"search-result"},De={key:0,class:"search-keyword"},Ee={class:"search-sort"},je={class:"search-sort-control"},ze={key:0,class:"search-sort-pagination"},Ke={key:1,class:"search-content"},Je={class:"search-content"},Xe={class:"flex justify-center mt-8"},Ge={key:1,class:"text-center py-4 text-black/65"},Oe={__name:"search",setup(b){var q,U,M,B,H,S,A,L;const c=_e(),n=ge(),ie=fe(),_=W({page:1}),l=W({categories:(typeof((q=n.query)==null?void 0:q.categories)=="string"?[(U=n.query)==null?void 0:U.categories]:(M=n.query)==null?void 0:M.categories)||[],minimum_price:((B=n.query)==null?void 0:B.minimum_price)||void 0,maximum_price:((H=n.query)==null?void 0:H.maximum_price)||void 0,sorting_price:((S=n.query)==null?void 0:S.sorting_price)||"asc"}),m=ye({minimum_price:((A=n.query)==null?void 0:A.minimum_price)||void 0,maximum_price:((L=n.query)==null?void 0:L.maximum_price)||void 0}),{data:oe}=te("/server/api/category",{key:"category-list",transform(s){return((s==null?void 0:s.data)||[]).reduce((e,y)=>(e.push(...y.childs.map(v=>({...v,icon:y.icon,name:`${y.name} - ${v.name}`}))),e),[])},getCachedData(){var s,e;return((s=c.payload.data)==null?void 0:s["category-list"])||((e=c.static.data)==null?void 0:e["category-list"])}}),{data:d,status:ne}=te("/server/api/product",{params:Y(()=>{var s;return{search:(s=n.query)==null?void 0:s.search,...l.value,..._.value,categories:void 0,"categories[]":l.value.categories}}),dedupe:"defer"});ve(l,s=>{ie.push({query:{...n.query,...s}})},{deep:!0});function se(){l.value.minimum_price=m.minimum_price,l.value.maximum_price=m.maximum_price}function ae(){l.value={categories:[],minimum_price:void 0,maximum_price:void 0,sorting_price:"asc"},m.minimum_price=void 0,m.maximum_price=void 0}const g=Y(()=>{var s,e;return(s=n.query)!=null&&s.search?`Sedang mencari produk ${(e=n.query)==null?void 0:e.search}`:`Sedang mencari produk${n.query.categories?` ${n.query.categories}`:""}`});return xe({title:g,ogTitle:()=>`${g.value} | Syopo`,twitterTitle:()=>`${g.value} | Syopo`,description:g,ogDescription:g,twitterDescription:g}),(s,e)=>{const y=Be,v=he,f=ke,re=Ce,le=Le,h=we,ue=Ve,ce=$e,me=be;return r(),C(me,{id:"search-section"},{default:x(()=>{var N,F,T,P,Z,I,R,D,E,j,z,K,J,X,G,O,Q;return[i("div",Ne,[i("div",Fe,[a(y),e[8]||(e[8]=i("h2",null,"Filter",-1))]),i("div",Te,[e[11]||(e[11]=i("h3",null,"Batas Harga",-1)),i("div",Pe,[a(v,{modelValue:t(m).minimum_price,"onUpdate:modelValue":e[0]||(e[0]=o=>t(m).minimum_price=o),type:"number",placeholder:"Rp MIN"},null,8,["modelValue"]),e[9]||(e[9]=i("div",{class:"h-[1px] bg-gray-300 w-10"},null,-1)),a(v,{modelValue:t(m).maximum_price,"onUpdate:modelValue":e[1]||(e[1]=o=>t(m).maximum_price=o),type:"number",placeholder:"Rp MAX"},null,8,["modelValue"])]),a(f,{block:"",class:"py-2",onClick:se},{default:x(()=>[...e[10]||(e[10]=[p("TERAPKAN",-1)])]),_:1})]),e[14]||(e[14]=i("hr",null,null,-1)),i("div",Ze,[e[12]||(e[12]=i("h3",null,"Berdasarkan Kategori",-1)),i("div",Ie,[(r(!0),u(k,null,w(t(oe),o=>(r(),C(re,{key:`cat-${o.slug}`,modelValue:t(l).categories,"onUpdate:modelValue":e[2]||(e[2]=de=>t(l).categories=de),label:o.name,value:o.slug},null,8,["modelValue","label","value"]))),128))])]),e[15]||(e[15]=i("hr",null,null,-1)),a(f,{block:"",class:"py-2",onClick:ae},{default:x(()=>[...e[13]||(e[13]=[p("HAPUS SEMUA",-1)])]),_:1})]),i("div",Re,[t(n).query.search?(r(),u("div",De,[a(le),i("p",null,[e[16]||(e[16]=p(" Hasil pencarian untuk '",-1)),i("span",null,V((N=t(n).query)==null?void 0:N.search),1),e[17]||(e[17]=p("' ",-1))])])):ee("",!0),i("div",Ee,[i("div",je,[e[20]||(e[20]=i("p",null,"Urutkan",-1)),a(f,{color:t(l).sorting_price==="asc"?"primary":"white",class:"px-6",onClick:e[3]||(e[3]=o=>t(l).sorting_price="asc")},{default:x(()=>[...e[18]||(e[18]=[p("Termurah",-1)])]),_:1},8,["color"]),a(f,{color:t(l).sorting_price==="desc"?"primary":"white",class:"px-6",onClick:e[4]||(e[4]=o=>t(l).sorting_price="desc")},{default:x(()=>[...e[19]||(e[19]=[p("Termahal",-1)])]),_:1},8,["color"])]),(P=(T=(F=t(d))==null?void 0:F.data)==null?void 0:T.data)!=null&&P.length?(r(),u("div",ze,[i("p",null,[i("span",null,V(t(_).page),1),p("/"+V(((I=(Z=t(d))==null?void 0:Z.data)==null?void 0:I.last_page)||0),1)]),i("div",null,[a(f,{icon:"i-heroicons:chevron-left-20-solid",color:"gray",size:"xs",disabled:!((D=(R=t(d))==null?void 0:R.data)!=null&&D.prev_page_url),onClick:e[5]||(e[5]=o=>t(_).page--)},null,8,["disabled"]),a(f,{icon:"i-heroicons:chevron-right-20-solid",color:"gray",size:"xs",class:"bg-black/5",disabled:!((j=(E=t(d))==null?void 0:E.data)!=null&&j.next_page_url),onClick:e[6]||(e[6]=o=>t(_).page++)},null,8,["disabled"])])])):ee("",!0)]),t(ne)==="pending"?(r(),u("div",Ke,[(r(),u(k,null,w(5,o=>i("div",{key:`loading-${o}`,class:"bg-white p-2"},[a(h,{class:"aspect-[1/1]"}),a(h,{class:"w-full h-4 mt-2"}),a(h,{class:"w-8/12 h-4 mt-2"})])),64))])):(r(),u(k,{key:2},[(J=(K=(z=t(d))==null?void 0:z.data)==null?void 0:K.data)!=null&&J.length?(r(),u(k,{key:0},[i("div",Je,[(r(!0),u(k,null,w((G=(X=t(d))==null?void 0:X.data)==null?void 0:G.data,o=>(r(),C(ue,{key:`product-${o.uuid}`,title:o.name,price:o.price_sale||o.price,image:o.image_url,sale:o.sale_count,slug:o.slug,discount:o.price_discount_percentage},null,8,["title","price","image","sale","slug","discount"]))),128))]),i("div",Xe,[a(ce,{modelValue:t(_).page,"onUpdate:modelValue":e[7]||(e[7]=o=>t(_).page=o),total:((Q=(O=t(d))==null?void 0:O.data)==null?void 0:Q.total)||0},null,8,["modelValue","total"])])],64)):(r(),u("div",Ge," Tidak ada product yang ditemukan "))],64))])]}),_:1})}}},ut=$(Oe,[["__scopeId","data-v-ca3f8541"]]);export{ut as default};
