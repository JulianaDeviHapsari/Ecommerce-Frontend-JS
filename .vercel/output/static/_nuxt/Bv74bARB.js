import{_ as G,c as d,o as c,a as s,m as F,b as v,n as J,t as y,g as u,w as L,d as K,k as Q,C as W,r as P,f as X,F as T,p as Y,h as A,i as ee,x as te,D as se,E as ae}from"./BVdw5vJQ.js";import{_ as oe}from"./p7QnFScQ.js";import{_ as ne}from"./MFBl4QUC.js";import{u as re}from"./DOzJKxRB.js";import{u as x}from"./BFX_Otd8.js";import{u as ie}from"./CCYVfaL6.js";import{u as le}from"./CTp7W1AJ.js";import{_ as ce,a as pe}from"./BmrZ0j-V.js";import"./D1CtcXX4.js";import"./0-e7FVdg.js";import"./C4HB1ECi.js";import"./DW2cZgo6.js";import"./D_Ip9zNA.js";import"./BSNo9jaY.js";import"./COQxO7zj.js";const ue={},de={xmlns:"http://www.w3.org/2000/svg",width:"87",height:"8",viewBox:"0 0 87 8",fill:"none"};function me(k,l){return c(),d("svg",de,[...l[0]||(l[0]=[s("rect",{width:"85",height:"1",transform:"translate(0.660156 3.19922)",fill:"black","fill-opacity":"0.26"},null,-1),s("mask",{id:"path-1-inside-1_30_6097",fill:"white"},[s("path",{d:"M83.1602 0.160156L86.6957 3.69569L83.1602 7.23123L79.6246 3.69569L83.1602 0.160156Z"})],-1),s("path",{d:"M86.6957 3.69569L87.4028 4.4028L88.1099 3.69569L87.4028 2.98859L86.6957 3.69569ZM82.453 0.867263L85.9886 4.4028L87.4028 2.98859L83.8673 -0.546951L82.453 0.867263ZM85.9886 2.98859L82.453 6.52413L83.8673 7.93834L87.4028 4.4028L85.9886 2.98859Z",fill:"black","fill-opacity":"0.26",mask:"url(#path-1-inside-1_30_6097)"},null,-1)])])}const _e=G(ue,[["render",me]]),fe={class:"flex flex-col justify-center items-center gap-6 px-16 pb-16 pt-9"},ve={class:"text-center text-sm text-black/85"},ke={__name:"Completed",props:{redirectTo:{type:String,default:"/"}},setup(k){const l=k,h=F(),{startCountdown:g,displayValue:w}=le();function a(){h.replace(l.redirectTo)}return g(3,a),(R,e)=>{const n=J,r=Q;return c(),d("div",fe,[v(n,{name:"i-heroicons:check-circle-solid",class:"h-36 w-36 text-green-500"}),s("p",ve," Pendaftaran anda berhasil dan anda akan diarahkan ke homepage dalam "+y(u(w))+" detik ",1),v(r,{block:"",to:"/"},{default:L(()=>[...e[0]||(e[0]=[K("Arahkan Sekarang",-1)])]),_:1})])}}},he={class:"bg-white"},ge={class:"max-w-[500px] mx-auto"},we={class:"step-header"},xe={class:"step-item-icon"},ye={class:"step-item-title"},Ue={__name:"form",setup(k){const l=re(),{tokenCookie:h,token:g,profile:w,registrationForm:a}=W(l),R=F(),e=P(0),n=P(),r=[{key:"otp",title:"Verifikasi email",component:ce},{key:"password",title:"Buat password",component:pe},{key:"completed",title:"Selesai",component:ke}],{status:b,error:C,execute:M}=x("/server/api/check-otp-register"),{status:U,execute:Z}=x("/server/api/resend-otp",{onResponse({response:o}){o.ok&&n.value.startCountdown()}});function D(){Z({email:a.value.email})}const{status:S,execute:O,error:B,data:$}=x("/server/api/verify-register"),{execute:I,status:j}=ie("/server/api/profile",{immediate:!1,onResponse({response:o}){o.ok&&(w.value=o._data.data,l.resetRegistrationForm(),e.value++)}}),z=X(()=>{switch(r[e.value].key){case"otp":return{loading:b.value==="pending",loadingResend:U.value==="pending"};case"password":return{loading:S.value==="pending"||j.value==="pending"};default:return{}}});async function H(o,t){var m,_,f,i,p,E,V,N;switch(o){case"otp":if(n.value.setError(""),await M({email:a.value.email,otp:t.otp}),C.value){n.value.setError((i=(f=(_=(m=C.value.data)==null?void 0:m.meta)==null?void 0:_.validations)==null?void 0:f.otp)==null?void 0:i[0]);return}b.value==="success"&&(a.value.otp=t.otp,e.value++);break;case"password":if(n.value.setError({}),await O({email:a.value.email,otp:a.value.otp,password:t.password,password_confirmation:t.password}),B.value){n.value.setError(((E=(p=B.value.data)==null?void 0:p.meta)==null?void 0:E.validations)||{});return}S.value==="success"&&(a.value.password=t.password,a.value.password_confirmation=t.password,g.value=(V=$.value.data)==null?void 0:V.token,h.value=(N=$.value.data)==null?void 0:N.token,I());break}}function q(o){if(o==="otp")return R.push("/registration");e.value--}return(o,t)=>{const m=_e,_=oe,f=ne;return c(),d("section",he,[v(f,{class:"py-14"},{default:L(()=>[s("div",ge,[s("div",we,[(c(),d(T,null,Y(r,(i,p)=>(c(),d(T,{key:i.key},[s("div",{class:te(["step-item",[p<=u(e)&&"is-done"]])},[s("div",xe,y(p+1),1),s("p",ye,y(i.title),1)],2),p<r.length-1?(c(),A(m,{key:0,class:"mb-6"})):ee("",!0)],64))),64))]),v(_,{class:"auth-shadow"},{default:L(()=>[(c(),A(se(r[u(e)].component),ae({ref_key:"formStepElement",ref:n},u(z),{onNext:t[0]||(t[0]=i=>H(r[u(e)].key,i)),onBack:t[1]||(t[1]=i=>q(r[u(e)].key)),onResend:D}),null,16))]),_:1})])]),_:1})])}}};export{Ue as default};
