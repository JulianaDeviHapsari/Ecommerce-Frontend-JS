import{b4 as a,A as s,b5 as n}from"./BVdw5vJQ.js";import{u}from"./DOzJKxRB.js";import{u as f}from"./CCYVfaL6.js";const k=a(async()=>{let o,t;const e=u();if(!e.tokenCookie)return s("/login",{external:!0});if(!e.token&&(e.token=e.tokenCookie,!e.profile.email)){const{error:r}=([o,t]=n(()=>f("/server/api/profile",{key:"profile",onResponse({response:i}){i.ok&&(e.profile=i._data.data)}})),o=await o,t(),o);if(r.value)return e.logout()}});export{k as default};
