import{_ as S}from"./D_Ip9zNA.js";import{m as h,r as _,c as v,a as n,b as i,w as E,g as a,B as U,o as b,i as C,t as N,k as D}from"./BVdw5vJQ.js";import{_ as G}from"./0-e7FVdg.js";import{u as M,e as R,r as j}from"./COQxO7zj.js";import{u as q}from"./DOzJKxRB.js";import{u as z}from"./BFX_Otd8.js";import"./BSNo9jaY.js";import"./CCYVfaL6.js";const A={key:0,class:"text-sm text-red-500 mt-1"},Q={__name:"change-email",setup(F){const s=q(),x=h(),t=_({email:""}),g={email:{required:j,email:R}},l=_({}),o=M(g,t,{$autoDirty:!0,$externalResults:l}),{execute:$,status:m,error:u}=z("/server/api/profile");async function V(){var e,r;if(l.value={},!!await o.value.$validate()){if(await $({email:t.value.email,gender:s.profile.gender,name:s.profile.name,_method:"PATCH"}),u.value){l.value=((r=(e=u.value.data)==null?void 0:e.meta)==null?void 0:r.validations)||{};return}m.value==="success"&&(s.profile.email=t.value.email,x.replace("/my-account/profile"))}}return(w,e)=>{var p,d;const r=S,y=D,k=G;return b(),v("div",null,[e[1]||(e[1]=n("h3",{class:"text-xl font-medium"},"Ganti Email",-1)),e[2]||(e[2]=n("hr",{class:"mt-5 mb-11 border-gray-200/60"},null,-1)),n("form",{onSubmit:U(V,["prevent"])},[i(k,{label:"Email Baru",ui:{wrapper:"flex gap-16",container:"w-96",label:{wrapper:"pt-2",base:"font-normal text-black/55 text-base"}},error:!!((d=(p=a(o).email.$errors)==null?void 0:p[0])!=null&&d.$message)},{default:E(()=>{var c,f;return[i(r,{modelValue:a(t).email,"onUpdate:modelValue":e[0]||(e[0]=B=>a(t).email=B),size:"lg",placeholder:"Masukkan Email-mu"},null,8,["modelValue"]),a(o).$invalid?(b(),v("p",A,N((f=(c=a(o).email.$errors)==null?void 0:c[0])==null?void 0:f.$message),1)):C("",!0),i(y,{type:"submit",label:"Selanjutnya",class:"mt-8",loading:a(m)==="pending",disabled:a(o).$invalid},null,8,["loading","disabled"])]}),_:1},8,["error"])],32)])}}};export{Q as default};
