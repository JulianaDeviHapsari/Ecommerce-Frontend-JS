import{_ as z}from"./C0KUnU0L.js";import{_ as A}from"./D_Ip9zNA.js";import{_ as q}from"./BD6unLEd.js";import{f as R,h as $,o as c,w as j,a,c as S,i as C,t as D,g as i,b as k,d as F,k as G,n as H,e as J,F as K,p as L,r as N,M as Q,v as M,j as W}from"./BVdw5vJQ.js";import{_ as X}from"./BrHeijYS.js";import{_ as Y}from"./p7QnFScQ.js";import{_ as Z}from"./rUE9myqw.js";import{S as ee}from"./D5C2oj6j.js";import{f as te}from"./CX-HCZMl.js";import{a as ae}from"./B4TYcooI.js";import{f as oe}from"./C__g2RLv.js";import{d as se}from"./B8iLdbf-.js";import{_ as ne}from"./DDjGGqVe.js";import{_ as re}from"./DxHTw6tJ.js";import{a as ie,u as le,r as de}from"./CCYVfaL6.js";import{r as ue}from"./Cxa_hSt3.js";import"./BNT2PxbG.js";import"./C97eXVNd.js";import"./Dq2jcSPC.js";import"./9dOsKKNX.js";import"./DOwuRLCg.js";import"./CxIZtCgj.js";import"./BSNo9jaY.js";import"./0kcxaRLk.js";import"./CovN8vff.js";import"./j9dIvsdS.js";import"./C_ZdkJcR.js";import"./BnWJvLOa.js";import"./0-e7FVdg.js";import"./Cpznx1_E.js";import"./DF4dXhcg.js";import"./COQxO7zj.js";import"./C4HB1ECi.js";import"./DOzJKxRB.js";import"./DE8bu4_G.js";import"./Bish5eGS.js";import"./C0tuFO62.js";import"./Bm92f-5u.js";import"./BwKW8Zfl.js";const me={class:"flex justify-between gap-4 items-center"},ce={class:"flex gap-2 items-center"},pe={class:"font-semibold"},_e={class:"divide-x flex"},fe={class:"flex gap-2 items-center text-teal-500 pr-2"},ve={class:"text-primary pl-2"},ye={class:"space-y-6"},ge={class:"flex justify-end"},ke={class:"flex gap-2 items-center"},xe={class:"text-primary text-2xl"},be={key:0,class:"flex justify-between items-center gap-4"},he={class:"text-xs"},we={class:"text-black/55"},De={class:"underline"},Ne={__name:"CardOrder",props:{order:{type:Object,default:()=>({})}},emits:["review"],setup(n,{emit:O}){const p=n,V=O,B=R(()=>{var s;return te(((s=p.order)==null?void 0:s.total)||0)}),r=R(()=>{var v,l,_,x;if(((l=(v=p.order)==null?void 0:v.last_status)==null?void 0:l.status)!=="done")return"";const s=new Date((x=(_=p.order)==null?void 0:_.last_status)==null?void 0:x.created_at),e=ae(s,1);return oe(e,"dd-MM-yyyy")}),f=R(()=>{var l,_;if(((_=(l=p.order)==null?void 0:l.last_status)==null?void 0:_.status)!=="done")return"";const s=new Date(r.value);return se(s,new Date)===0});return(s,e)=>{const v=q,l=G,_=H,x=X,P=J,o=Y;return c(),$(o,{ui:{base:"text-sm text-black/85",divide:"divide-dashed",footer:{background:"bg-yellow-50/30"}}},{default:j(()=>{var t,d,u,y,g,b,h,w,m,U,T;return[a("div",me,[a("div",ce,[a("span",pe,D((d=(t=n.order)==null?void 0:t.seller)==null?void 0:d.store_name),1),k(l,{color:"white",size:"xs",to:`/shop/${(y=(u=n.order)==null?void 0:u.seller)==null?void 0:y.username}`},{default:j(()=>[k(v),e[1]||(e[1]=F(" Kunjungi Toko ",-1))]),_:1},8,["to"])]),a("div",_e,[a("div",fe,[((b=(g=n.order)==null?void 0:g.last_status)==null?void 0:b.status)==="on_delivery"?(c(),$(_,{key:0,name:"i-heroicons:truck",class:"w-4 h-4"})):C("",!0),a("span",null,D((w=(h=n.order)==null?void 0:h.last_status)==null?void 0:w.description),1)]),a("span",ve,D((T=i(ee))==null?void 0:T[(U=(m=n.order)==null?void 0:m.last_status)==null?void 0:U.status]),1)])]),e[2]||(e[2]=a("hr",{class:"my-3"},null,-1)),k(P,{class:"space-y-3",to:`/my-account/orders/${n.order.uuid}`},{default:j(()=>{var E;return[(c(!0),S(K,null,L(((E=n.order)==null?void 0:E.items)||[],I=>(c(),$(x,{key:`order-${n.order.uuid}-product-${I.uuid}`,item:I},null,8,["item"]))),128))]}),_:1},8,["to"])]}),footer:j(()=>{var t,d,u,y,g;return[a("div",ye,[a("div",ge,[a("div",ke,[e[3]||(e[3]=a("img",{src:Z,class:"h-4 w-4"},null,-1)),e[4]||(e[4]=a("span",{class:"text-black/80"},"Total Pesanan:",-1)),a("span",xe,"Rp"+D(i(B)),1)])]),((d=(t=n.order)==null?void 0:t.last_status)==null?void 0:d.status)==="done"&&i(f)&&!((g=(y=(u=n.order)==null?void 0:u.items)==null?void 0:y[0])!=null&&g.is_reviewed)?(c(),S("div",be,[a("div",he,[a("p",we,[e[5]||(e[5]=F(" Nilai produk sebelum ",-1)),a("span",De,D(i(r)),1)]),e[6]||(e[6]=a("p",{class:"text-primary"},"Nilai sekarang & dapatkan 25 Koin Syopo!",-1))]),k(l,{label:"Nilai",class:"min-w-40 justify-center",onClick:e[0]||(e[0]=b=>V("review",n.order))})])):C("",!0)])]}),_:1})}}},Re={class:"space-y-3"},$e={key:1,class:"text-sm font-medium text-black/55 py-4 text-center"},pt={__name:"index",setup(n){const{data:O}=ie("order-customer"),p=N(!1),V=N(),B=N();let r=null;const f=N({page:1,per_page:3}),s=N({search:"",status:0}),e=ue(R(()=>s.value.search),1e3),v=[{label:"Semua",key:"all"},{label:"Belum Bayar",key:"pending_payment"},{label:"Sudah Dibayar",key:"paid"},{label:"Sedang Dikemas",key:"on_processing"},{label:"Dikirim",key:"on_delivery"},{label:"Selesai",key:"done"},{label:"Dibatalkan",key:"failed"}],{data:l,status:_}=le("/server/api/order",{key:"order-customer",onResponse({response:o}){o.ok&&(r||(r=new IntersectionObserver(t=>{t[0].isIntersecting&&o._data.data.next_page_url&&f.value.page<o._data.data.last_page&&f.value.page++}),r.observe(B.value)))},params:R(()=>{var t;const o=s.value.status>0?(t=v[s.value.status])==null?void 0:t.key:void 0;return{...f.value,search:e.value||void 0,last_status:o}}),transform(o){var d,u;if(f.value.page===1)return o==null?void 0:o.data;const t=((d=o==null?void 0:o.data)==null?void 0:d.data)||[];return{...o.data,data:[...((u=O.value)==null?void 0:u.data)||[],...t]}}});Q(()=>{r&&(r.disconnect(),r=null)}),M(e,()=>{f.value.page=1}),M(()=>s.value.status,()=>{r&&(r.disconnect(),r=null),s.value.search="",f.value.page=1});function x(o){V.value.setDefaultData(o),p.value=!0}function P(){de("order-customer")}return(o,t)=>{var h,w;const d=z,u=A,y=Ne,g=ne,b=re;return c(),S("div",Re,[k(d,{modelValue:i(s).status,"onUpdate:modelValue":t[0]||(t[0]=m=>i(s).status=m),items:v,ui:{list:{height:"h-full",tab:{font:"font-normal",height:"h-14"}}},content:!1},null,8,["modelValue"]),k(u,{modelValue:i(s).search,"onUpdate:modelValue":t[1]||(t[1]=m=>i(s).search=m),"leading-icon":"i-heroicons:magnifying-glass",size:"lg",placeholder:"Kamu bisa cari berdasarkan Nama Penjual, No. Pesanan atau Nama Produk",ui:{color:{white:{outline:"bg-gray-200/50 ring-0 placeholder-gray-500"}}}},null,8,["modelValue"]),(c(!0),S(K,null,L(((h=i(l))==null?void 0:h.data)||[],(m,U)=>(c(),$(y,{key:`order-${U}`,order:m,onReview:x},null,8,["order"]))),128)),a("div",{ref_key:"observerElement",ref:B},null,512),i(_)==="pending"?(c(),$(g,{key:0})):(((w=i(l))==null?void 0:w.data)||[]).length===0?(c(),S("p",$e," Tidak ada order yang ditemukan ")):C("",!0),k(b,{ref_key:"modalReviewElement",ref:V,open:i(p),"onUpdate:open":t[2]||(t[2]=m=>W(p)?p.value=m:null),onSuccess:P},null,8,["open"])])}}};export{pt as default};
