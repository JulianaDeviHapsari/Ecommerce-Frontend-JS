import{u as L,t as w,i as _,c as O,n as W,a as j,b as q,m as P,d as $}from"./Cxa_hSt3.js";import{f as x,r as b,a6 as g,v as z,R as B,aj as D,Y as A,aE as F}from"./BVdw5vJQ.js";function H(n={}){const{inheritAttrs:e=!0}=n,t=g(),o=A({setup(s,{slots:l}){return()=>{t.value=l.default}}}),c=A({inheritAttrs:e,setup(s,{attrs:l,slots:d}){return()=>{var p;t.value;const u=(p=t.value)==null?void 0:p.call(t,{...I(l),$slots:d});return e&&(u==null?void 0:u.length)===1?u[0]:u}}});return P({define:o,reuse:c},[o,c])}function I(n){const e={};for(const t in n)e[$(t)]=n[t];return e}const K=_?window:void 0,E=_?window.navigator:void 0;function N(n){var e;const t=w(n);return(e=t==null?void 0:t.$el)!=null?e:t}function R(...n){let e,t,o,c;if(typeof n[0]=="string"||Array.isArray(n[0])?([t,o,c]=n,e=K):[e,t,o,c]=n,!e)return W;Array.isArray(t)||(t=[t]),Array.isArray(o)||(o=[o]);const s=[],l=()=>{s.forEach(a=>a()),s.length=0},d=(a,i,v,m)=>(a.addEventListener(i,v,m),()=>a.removeEventListener(i,v,m)),p=z(()=>[N(e),w(c)],([a,i])=>{if(l(),!a)return;const v=j(i)?{...i}:i;s.push(...t.flatMap(m=>o.map(y=>d(a,m,y,v))))},{immediate:!0,flush:"post"}),u=()=>{p(),l()};return q(u),u}function V(){const n=b(!1),e=D();return e&&B(()=>{n.value=!0},e),n}function T(n){const e=V();return x(()=>(e.value,!!n()))}function S(n,e={}){const{controls:t=!1,navigator:o=E}=e,c=T(()=>o&&"permissions"in o),s=g(),l=typeof n=="string"?{name:n}:n,d=g(),p=()=>{var a,i;d.value=(i=(a=s.value)==null?void 0:a.state)!=null?i:"prompt"};R(s,"change",p);const u=O(async()=>{if(c.value){if(!s.value)try{s.value=await o.permissions.query(l)}catch{s.value=void 0}finally{p()}if(t)return F(s.value)}});return u(),t?{state:d,isSupported:c,query:u}:d}function J(n={}){const{navigator:e=E,read:t=!1,source:o,copiedDuring:c=1500,legacy:s=!1}=n,l=T(()=>e&&"clipboard"in e),d=S("clipboard-read"),p=S("clipboard-write"),u=x(()=>l.value||s),a=b(""),i=b(!1),v=L(()=>i.value=!1,c);function m(){l.value&&h(d.value)?e.clipboard.readText().then(r=>{a.value=r}):a.value=k()}u.value&&t&&R(["copy","cut"],m);async function y(r=w(o)){u.value&&r!=null&&(l.value&&h(p.value)?await e.clipboard.writeText(r):M(r),a.value=r,i.value=!0,v.start())}function M(r){const f=document.createElement("textarea");f.value=r??"",f.style.position="absolute",f.style.opacity="0",document.body.appendChild(f),f.select(),document.execCommand("copy"),f.remove()}function k(){var r,f,C;return(C=(f=(r=document==null?void 0:document.getSelection)==null?void 0:r.call(document))==null?void 0:f.toString())!=null?C:""}function h(r){return r==="granted"||r==="prompt"}return{isSupported:u,text:a,copied:i,copy:y}}export{H as c,J as u};
