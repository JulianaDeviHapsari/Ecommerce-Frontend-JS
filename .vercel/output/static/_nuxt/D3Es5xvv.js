import{l as te,r as V,f as b,h as oe,w as r,o as M,a as i,b as o,c as ne,i as re,t as v,g as e,k as se,d as f,j as le,B as ie}from"./BVdw5vJQ.js";import{_ as ue}from"./D0T0ISyS.js";import{_ as me}from"./Cm2tcYAv.js";import{_ as de}from"./0-e7FVdg.js";import{_ as pe}from"./D_Ip9zNA.js";import{_ as _e}from"./BnWJvLOa.js";import{_ as ce}from"./p7QnFScQ.js";import{_ as be}from"./DE8bu4_G.js";import{_ as fe}from"./Cdgg-7JV.js";import{f as I}from"./CX-HCZMl.js";import{b as ke,u as ge,r as p,a as Ve}from"./COQxO7zj.js";import{u as ve}from"./DOzJKxRB.js";import{u as J,r as xe}from"./CCYVfaL6.js";import{u as we}from"./BFX_Otd8.js";import"./DF4dXhcg.js";import"./BSNo9jaY.js";import"./BkpUadhd.js";import"./Bm92f-5u.js";import"./CxIZtCgj.js";import"./C97eXVNd.js";import"./C0tuFO62.js";import"./DOwuRLCg.js";import"./Dq2jcSPC.js";import"./C9URDrvn.js";import"./9dOsKKNX.js";import"./BwKW8Zfl.js";import"./f51bCrOI.js";import"./Bish5eGS.js";const ye={class:"space-y-6 mt-4"},$e={class:"border rounded p-4 shadow space-y-4"},Ue={class:"flex items-center gap-4"},Ce={class:"text-3xl font-medium"},Ne={key:0,class:"text-lg font-medium"},he={class:"flex justify-between items-center"},Be={class:"flex gap-2 items-center justify-end pt-4"},ra={__name:"balance",setup(Se){const x=te(),w=ve(),m=V(!1),_=V({page:1,per_page:10}),n=V({amount:0,description:"",bank_code:"",bank_account_number:"",bank_account_holder:""}),P={amount:{required:p,minValue:Ve(1e4),maxValue:ke(b(()=>w.profile.balance))},description:{required:p},bank_code:{required:p},bank_account_number:{required:p},bank_account_holder:{required:p}},u=ge(P,n,{$autoDirty:!0}),q=b(()=>I(w.profile.balance||0)),{data:k,status:y,execute:E,refresh:F}=J("/server/api/seller-dashboard/wallet-transaction",{key:"balance-seller",params:b(()=>({..._.value})),transform(t){return(t==null?void 0:t.data)||{}},watch:!1}),{data:G,status:$}=J("/server/api/seller-dashboard/list-bank",{key:"bank-list",transform(t){return(t==null?void 0:t.data)||[]},getCacheData(){var t,a;return((t=x.payload.data)==null?void 0:t["bank-list"])||((a=x.static.data)==null?void 0:a["bank-list"])}}),{execute:K,status:U}=we("/server/api/seller-dashboard/withdraw",{onResponse({response:t}){t.ok&&(C(),F(),xe("profile"))}}),L=[{label:"Transaksi Tipe",key:"type",rowClass:"capitalize"},{label:"Jumlah",key:"amount",rowClass:"font-bold"},{label:"Deskripsi",key:"description"},{label:"Waktu",key:"time"}],H=b(()=>{var t;return((t=k.value)==null?void 0:t.data)||[]});async function O(){await u.value.$validate()&&K(n.value)}function C(){n.value={amount:0,description:"",bank_code:"",bank_account_number:"",bank_account_holder:""},u.value.$reset(),m.value=!1}return(t,a)=>{const c=se,Q=ue,X=me,d=de,g=pe,Y=_e,Z=ce,ee=be,ae=fe;return M(),oe(ae,{title:"Informasi Saldo"},{default:r(()=>{var N,h;return[i("div",ye,[i("div",$e,[a[10]||(a[10]=i("p",{class:"text-black/65"},"Saldo",-1)),i("div",Ue,[i("span",Ce,"Rp"+v(e(q)),1),o(c,{onClick:a[0]||(a[0]=l=>m.value=!0)},{default:r(()=>[...a[9]||(a[9]=[f("Tarik Dana",-1)])]),_:1})])]),e(y)!=="pending"?(M(),ne("p",Ne,v(((N=e(k))==null?void 0:N.total)||0)+" Transaksi ",1)):re("",!0),o(Q,{page:e(_).page,"onUpdate:page":[a[1]||(a[1]=l=>e(_).page=l),e(E)],columns:L,rows:e(H),loading:e(y)==="pending",total:(h=e(k))==null?void 0:h.total,"per-page":e(_).per_page},{"amount-data":r(({row:l})=>[f(" Rp"+v(("formatNumber"in t?t.formatNumber:e(I))(l.amount)),1)]),_:1},8,["page","rows","loading","total","per-page","onUpdate:page"])]),o(ee,{modelValue:e(m),"onUpdate:modelValue":a[8]||(a[8]=l=>le(m)?m.value=l:null)},{default:r(()=>[o(Z,null,{default:r(()=>{var l,B,S,T,D,z,R,W,j,A;return[i("div",he,[a[11]||(a[11]=i("span",null,"Tarik Saldo",-1)),o(c,{icon:"i-heroicons:x-mark",variant:"ghost",color:"gray",onClick:a[2]||(a[2]=s=>m.value=!1)})]),i("form",{class:"space-y-4 mt-4",onSubmit:ie(O,["prevent"])},[o(d,{label:"Bank",error:(B=(l=e(u).bank_code.$errors)==null?void 0:l[0])==null?void 0:B.$message},{default:r(()=>[o(X,{modelValue:e(n).bank_code,"onUpdate:modelValue":a[3]||(a[3]=s=>e(n).bank_code=s),options:e(G),size:"lg",loading:e($)==="pending",disabled:e($)==="pending","option-attribute":"name","value-attribute":"code"},null,8,["modelValue","options","loading","disabled"])]),_:1},8,["error"]),o(d,{label:"No. Rekening",error:(T=(S=e(u).bank_account_number.$errors)==null?void 0:S[0])==null?void 0:T.$message},{default:r(()=>[o(g,{modelValue:e(n).bank_account_number,"onUpdate:modelValue":a[4]||(a[4]=s=>e(n).bank_account_number=s),size:"lg"},null,8,["modelValue"])]),_:1},8,["error"]),o(d,{label:"Nama Pemilik Rekening",error:(z=(D=e(u).bank_account_holder.$errors)==null?void 0:D[0])==null?void 0:z.$message},{default:r(()=>[o(g,{modelValue:e(n).bank_account_holder,"onUpdate:modelValue":a[5]||(a[5]=s=>e(n).bank_account_holder=s),size:"lg"},null,8,["modelValue"])]),_:1},8,["error"]),o(d,{label:"Jumlah Penarikan",error:(W=(R=e(u).amount.$errors)==null?void 0:R[0])==null?void 0:W.$message},{default:r(()=>[o(g,{modelValue:e(n).amount,"onUpdate:modelValue":a[6]||(a[6]=s=>e(n).amount=s),type:"number",size:"lg"},null,8,["modelValue"])]),_:1},8,["error"]),o(d,{label:"Deskripsi",error:(A=(j=e(u).description.$errors)==null?void 0:j[0])==null?void 0:A.$message},{default:r(()=>[o(Y,{modelValue:e(n).description,"onUpdate:modelValue":a[7]||(a[7]=s=>e(n).description=s),size:"lg"},null,8,["modelValue"])]),_:1},8,["error"]),i("div",Be,[o(c,{color:"white",disabled:e(U)==="pending",onClick:C},{default:r(()=>[...a[12]||(a[12]=[f(" Tutup ",-1)])]),_:1},8,["disabled"]),o(c,{type:"submit",loading:e(U)==="pending"},{default:r(()=>[...a[13]||(a[13]=[f(" Konfirmasi ",-1)])]),_:1},8,["loading"])])],32)]}),_:1})]),_:1},8,["modelValue"])]}),_:1})}}};export{ra as default};
