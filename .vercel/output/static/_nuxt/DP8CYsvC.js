import{m as K,r as p,f as _,h as C,w as s,o as f,b as r,a as n,g as o,B as P,k as H,d as m,c as O,i as B,t as l}from"./BVdw5vJQ.js";import{_ as q}from"./C0KUnU0L.js";import{_ as J}from"./D_Ip9zNA.js";import{_ as Q}from"./Br08c1V3.js";import{_ as X}from"./COhzXEaG.js";import{_ as Y}from"./D0T0ISyS.js";import{_ as G}from"./Cdgg-7JV.js";import{f as W}from"./CX-HCZMl.js";import{u as Z,r as ee}from"./CCYVfaL6.js";import{u as te}from"./BFX_Otd8.js";import{f as ae}from"./C__g2RLv.js";import{r as oe,t as ne}from"./CovN8vff.js";import"./BNT2PxbG.js";import"./C97eXVNd.js";import"./Dq2jcSPC.js";import"./9dOsKKNX.js";import"./DOwuRLCg.js";import"./CxIZtCgj.js";import"./BSNo9jaY.js";import"./DF4dXhcg.js";import"./BkpUadhd.js";import"./p7QnFScQ.js";import"./DOzJKxRB.js";function se(h){return oe(1,arguments),ne(h).getTime()<Date.now()}const re=""+new URL("voucher-cashback-coin.CXwHB_9e.png",import.meta.url).href,ie=""+new URL("voucher-percentage.Dc-DzVhC.png",import.meta.url).href,le=""+new URL("voucher-fixed.CYQFLj4F.png",import.meta.url).href,ue={class:"mt-8 space-y-4 text-sm"},ce={class:"flex gap-2"},de=["src"],me={class:"flex flex-col items-start gap-0.5"},pe={class:"text-sm font-medium"},_e={class:"text-sm"},fe={key:0,class:"flex gap-2 items-center text-sm text-black/55"},he={class:"flex flex-col gap-2"},je={__name:"index",setup(h){const U=K(),g={coin:re,percentage:ie,fixed:le},b=[{label:"Semua",key:"all"},{label:"Berjalan",key:"ongoing"},{label:"Akan Datang",key:"coming_soon"},{label:"Expired",key:"expired"}],w=[{key:"name",label:"Nama Voucher | Kode"},{key:"discount",label:"Diskon"},{key:"end_date",label:"Batas Pemakaian"},{key:"used_count",label:"Digunakan"},{key:"action",label:"Aksi"}],i=p({search:void 0,status:0}),u=p({page:1,per_page:10}),c=p(),{data:k,status:N,execute:v}=Z("/server/api/seller-dashboard/voucher",{key:"voucher-seller",params:_(()=>({...u.value,...i.value,status:i.value.status?b[i.value.status].key:void 0})),transform(t){return(t==null?void 0:t.data)||{}},watch:!1}),{execute:E,status:x}=te(_(()=>`/server/api/seller-dashboard/voucher/${c.value}`),{method:"DELETE",onResponse({response:t}){t.ok&&(ee("voucher-seller"),c.value=null)}}),$=_(()=>{var t;return((t=k.value)==null?void 0:t.data)||[]});function T(t){U.push({path:`/seller/voucher/edit/${t.uuid}`,state:{voucher:JSON.stringify(t)}})}function y(){u.value.page=1,v()}function R(t){window.confirm("Anda yakin untuk menghapus voucher ini?")&&(c.value=t.uuid,E())}function D(t){return ae(new Date(t),"dd MMM yyyy")}function S(t){return se(new Date(t))}return(t,a)=>{const d=H,A=q,F=J,L=Q,I=X,M=Y,j=G;return f(),C(j,{title:"Daftar Voucher"},{"header-append":s(()=>[r(d,{icon:"i-heroicons:plus",to:"/seller/voucher/add"},{default:s(()=>[...a[3]||(a[3]=[m("Tambah Voucher",-1)])]),_:1})]),default:s(()=>{var V;return[r(A,{modelValue:o(i).status,"onUpdate:modelValue":[a[0]||(a[0]=e=>o(i).status=e),y],items:b,ui:{wrapper:"border-b border-gray-100",list:{width:"w-[unset] border-none",tab:{font:"font-normal"}}},content:!1},null,8,["modelValue"]),n("div",ue,[n("form",{class:"flex gap-3 items-center",onSubmit:P(y,["prevent"])},[a[5]||(a[5]=n("span",null,"Cari",-1)),r(F,{modelValue:o(i).search,"onUpdate:modelValue":a[1]||(a[1]=e=>o(i).search=e),placeholder:"Input",class:"w-80"},null,8,["modelValue"]),r(d,{type:"submit",variant:"outline",size:"xs"},{default:s(()=>[...a[4]||(a[4]=[m(" Cari ",-1)])]),_:1})],32),r(M,{page:o(u).page,"onUpdate:page":[a[2]||(a[2]=e=>o(u).page=e),o(v)],total:((V=o(k))==null?void 0:V.total)||0,"per-page":o(u).per_page,rows:o($),columns:w,loading:o(N)==="pending"},{"name-data":s(({row:e})=>[n("div",ce,[n("img",{class:"w-14 h-14 object-cover",src:e.voucher_type==="discount"?g[e.discount_cashback_type]:g.coin},null,8,de),n("div",me,[S(e.end_date)?(f(),C(L,{key:0,label:"Telah Berakhir",color:"gray",size:"xs",variant:"soft",ui:{variant:{soft:"bg-gray-100"}}})):B("",!0),n("span",pe,l(e.name),1),n("span",_e,"KODE:"+l(e.code),1)])])]),"end_date-data":s(({row:e})=>[m(l(D(e.start_date))+" - "+l(D(e.end_date)),1)]),"discount-data":s(({row:e})=>[n("p",null,l(e.discount_cashback_type==="fixed"?"Rp":"")+l(("formatNumber"in t?t.formatNumber:o(W))(e.discount_cashback_value))+l(e.discount_cashback_type==="percentage"?"%":""),1),e.voucher_type==="cashback"?(f(),O("div",fe,[r(I,{class:"w-4 h-4"}),a[6]||(a[6]=m(" Cashback Koin ",-1))])):B("",!0)]),"action-data":s(({row:e})=>[n("div",he,[r(d,{label:"Ubah",variant:"link",color:"blue",padded:!1,disabled:o(x)==="pending",onClick:z=>T(e)},null,8,["disabled","onClick"]),r(d,{label:"Hapus",variant:"link",color:"blue",padded:!1,loading:o(x)==="pending"&&o(c)===e.uuid,onClick:z=>R(e)},null,8,["loading","onClick"])])]),_:1},8,["page","total","per-page","rows","loading","onUpdate:page"])])]}),_:1})}}};export{je as default};
