import{_ as it}from"./j9dIvsdS.js";import{_ as Y,r as L,f as b,c as h,o as m,a as t,b as i,t as p,g as a,h as q,i as Z,j as W,w as c,d as D,k as tt,l as lt,m as rt,F as H,n as dt,p as ct}from"./BVdw5vJQ.js";import{_ as ut}from"./p7QnFScQ.js";import{_ as mt}from"./0kcxaRLk.js";import{_ as pt}from"./BmF-Z5ul.js";import{f as S,a as _t}from"./CX-HCZMl.js";import{u as z}from"./BFX_Otd8.js";import{r as G,u as ft}from"./CCYVfaL6.js";import{_ as vt,a as xt}from"./BJx1cCpd.js";import{_ as gt}from"./COhzXEaG.js";import{_ as kt}from"./DF4dXhcg.js";import{_ as yt}from"./MFBl4QUC.js";import{u as ht}from"./DOzJKxRB.js";import"./D_Ip9zNA.js";import"./BSNo9jaY.js";import"./C3LguLNo.js";import"./DE8bu4_G.js";import"./Bish5eGS.js";import"./DOwuRLCg.js";import"./C97eXVNd.js";import"./C0tuFO62.js";import"./9dOsKKNX.js";import"./Bm92f-5u.js";import"./CxIZtCgj.js";import"./BwKW8Zfl.js";import"./B8iLdbf-.js";import"./CovN8vff.js";const bt={class:"cart-product"},Ct={class:"w-[46%]"},$t={class:"flex gap-3 text-sm items-center"},wt={class:"line-clamp-2 items-center text-black/85"},Vt={class:"w-40"},jt={class:"text-center w-[15%]"},It={class:"flex justify-center flex-col items-center w-[15%] gap-2"},Nt={class:"text-center w-[15%] text-primary"},Rt={class:"text-center w-[10%]"},Ut={__name:"ProductItem",props:{item:{type:Object,default:()=>({})}},setup(u){var T;const f=u,v=L(((T=f.item)==null?void 0:T.qty)||0),{execute:C,status:x}=z(b(()=>`/server/api/cart/${f.item.uuid}`),{onResponse({response:o}){o.ok&&G("cart")}}),{execute:E,status:n}=z(b(()=>`/server/api/cart/${f.item.uuid}`),{method:"DELETE",onResponse({response:o}){o.ok&&G("cart")}});function F(){var l,$;const o=new FormData;($=(l=f.item)==null?void 0:l.variations)==null||$.forEach((w,_)=>{o.append(`variations[${_}][label]`,w.label),o.append(`variations[${_}][value]`,w.value)}),o.append("qty",v.value),o.append("_method","PATCH"),C(o)}return(o,l)=>{const $=mt,w=pt,_=tt;return m(),h("div",bt,[t("div",Ct,[t("div",$t,[i($,{src:u.item.product.image_url,class:"aspect-[1/1] w-20"},null,8,["src"]),t("p",wt,p(u.item.product.name),1),t("div",Vt,[l[1]||(l[1]=t("p",null,"Variasi:",-1)),t("p",null,p(u.item.variations.map(j=>j.value).join(", ")),1)])])]),t("div",jt," Rp"+p(("formatNumber"in o?o.formatNumber:a(S))(u.item.product.price_sale||u.item.product.price)),1),t("div",It,[i(w,{modelValue:a(v),"onUpdate:modelValue":l[0]||(l[0]=j=>W(v)?v.value=j:null),max:u.item.stock,disabled:a(n)==="pending"},null,8,["modelValue","max","disabled"]),a(v)!==u.item.qty?(m(),q(_,{key:0,variant:"link",size:"xs",padded:!1,loading:a(x)=="pending",disabled:a(n)==="pending",onClick:F},{default:c(()=>[...l[2]||(l[2]=[D(" Perbarui Kuantitas ",-1)])]),_:1},8,["loading","disabled"])):Z("",!0)]),t("div",Nt," Rp"+p(("formatNumber"in o?o.formatNumber:a(S))(u.item.total)),1),t("div",Rt,[i(_,{variant:"link",color:"black",disabled:a(x)==="pending",loading:a(n)==="pending",onClick:a(E)},{default:c(()=>[...l[3]||(l[3]=[D(" Hapus ",-1)])]),_:1},8,["disabled","loading","onClick"])])])}}},Pt=Y(Ut,[["__scopeId","data-v-411e2372"]]),Bt={key:0,class:"flex gap-4 items-center justify-center min-h-96"},Dt={key:0,class:"flex gap-4 items-center justify-center min-h-96 flex-col"},St={class:"grid grid-cols-1 divide-y"},Tt={class:"flex justify-end gap-40"},Kt={class:"flex gap-1 items-center font-medium"},At={class:"flex justify-end"},Et={class:"flex items-center gap-5"},Ft={class:"flex gap-2"},Ht={class:"font-medium text-sm text-gray-500"},Qt={class:"flex justify-end flex-1 min-w-48"},Lt={class:"text-gray-300"},qt={class:"flex justify-end item"},Wt={class:"flex gap-4"},zt={class:"flex items-center gap-1"},Gt={class:"text-primary font-normal text-2xl"},Mt={key:0,class:"flex gap-6 text-sm font-normal justify-end"},Ot={class:"text-primary"},Q="sm:py-3 sm:px-7",Jt={__name:"cart",setup(u){const f=ht(),v=lt(),C=L(!1),x=L(!1),E=rt(),{data:n,status:F}=ft("/server/api/cart",{server:!1,key:"cart",onResponse({response:s}){var e,r,y;s.ok&&(x.value=!!((y=(r=(e=s._data)==null?void 0:e.data)==null?void 0:r.cart)!=null&&y.pay_with_coin))},getCachedData(){var s,e;return((s=v.payload.data)==null?void 0:s["category-list"])||((e=v.static.data)==null?void 0:e["category-list"])}}),T=b(()=>{var s,e,r;return S(((r=(e=(s=n.value)==null?void 0:s.data)==null?void 0:e.cart)==null?void 0:r.total)||0)}),o=b(()=>{var r,y,V,K,A,I;const s=((V=(y=(r=n.value)==null?void 0:r.data)==null?void 0:y.cart)==null?void 0:V.voucher_cashback)||0,e=((I=(A=(K=n.value)==null?void 0:K.data)==null?void 0:A.cart)==null?void 0:I.voucher_value)||0;return _t(s+e)}),l=b(()=>S(f.profile.balance)),$=b(()=>{var s,e,r;return S((r=(e=(s=n.value)==null?void 0:s.data)==null?void 0:e.cart)==null?void 0:r.pay_with_coin)}),{execute:w,status:_}=z("/server/api/cart/toggle-coin",{params:b(()=>({use:x.value?1:0})),onResponse({response:s}){s.ok&&G("cart")}});function j(){w()}function et(){E.push("/checkout")}return(s,e)=>{const r=it,y=dt,V=ut,K=Pt,A=vt,I=tt,at=gt,ot=kt,st=xt,nt=yt;return m(),q(nt,{class:"py-5 flex flex-col gap-6"},{default:c(()=>{var M,O,J;return[a(F)==="pending"?(m(),h("div",Bt,[i(r,{class:"w-12 text-primary"}),e[3]||(e[3]=t("p",null,"Loading...",-1))])):(m(),h(H,{key:1},[(J=(O=(M=a(n))==null?void 0:M.data)==null?void 0:O.items)!=null&&J.length?(m(),h(H,{key:1},[i(V,null,{default:c(()=>[...e[5]||(e[5]=[t("div",{class:"cart-header"},[t("div",{class:"w-[46%]"},"Produk"),t("div",{class:"text-center w-[15%]"},"Harga Satuan"),t("div",{class:"text-center w-[15%]"},"Kuantitas"),t("div",{class:"text-center w-[15%]"},"Total Harga"),t("div",{class:"text-center w-[10%]"},"Aksi")],-1)])]),_:1}),i(V,null,{default:c(()=>{var d,g;return[t("div",St,[(m(!0),h(H,null,ct((g=(d=a(n))==null?void 0:d.data)==null?void 0:g.items,k=>(m(),q(K,{key:`product-${k.uuid}`,item:k},null,8,["item"]))),128))])]}),_:1}),i(V,{ui:{header:{padding:Q},body:{padding:Q},footer:{padding:Q},divide:"divide-dashed"}},{header:c(()=>[t("div",Tt,[t("div",Kt,[i(A),e[6]||(e[6]=D(" Voucher Syopo ",-1))]),i(I,{variant:"link",color:"blue",disabled:a(_)==="pending",onClick:e[0]||(e[0]=d=>C.value=!0)},{default:c(()=>{var d,g,k,N,R,U,P,B;return[D(p((N=(k=(g=(d=a(n))==null?void 0:d.data)==null?void 0:g.cart)==null?void 0:k.voucher)!=null&&N.code?`${(B=(P=(U=(R=a(n))==null?void 0:R.data)==null?void 0:U.cart)==null?void 0:P.voucher)==null?void 0:B.code} - Klik untuk mengganti`:"Gunakan/ masukkan kode"),1)]}),_:1},8,["disabled"])])]),default:c(()=>[t("div",At,[t("div",Et,[i(ot,{modelValue:a(x),"onUpdate:modelValue":e[1]||(e[1]=d=>W(x)?x.value=d:null),disabled:!a(f).profile.balance||a(_)==="pending",onChange:j},{label:c(()=>[t("div",Ft,[i(at),e[7]||(e[7]=t("span",{class:"font-medium"},"Koin Syopo",-1))])]),_:1},8,["modelValue","disabled"]),t("span",Ht," Saldo Koin "+p(a(f).profile.balance?a(l):"Tidak Cukup"),1),t("div",Qt,[t("span",Lt,"-Rp"+p(a($)),1)])])])]),footer:c(()=>{var d,g,k,N,R,U,P,B,X;return[t("div",qt,[t("div",Wt,[t("div",null,[t("div",zt,[t("span",null,"Total ("+p((k=(g=(d=a(n))==null?void 0:d.data)==null?void 0:g.items)==null?void 0:k.length)+" produk):",1),t("span",Gt," Rp"+p(a(T)),1)]),(U=(R=(N=a(n).value)==null?void 0:N.data)==null?void 0:R.cart)!=null&&U.voucher_cashback||(X=(B=(P=a(n).value)==null?void 0:P.data)==null?void 0:B.cart)!=null&&X.voucher_value?(m(),h("div",Mt,[e[8]||(e[8]=t("span",null,"Hemat",-1)),t("span",Ot,p(a(o)),1)])):Z("",!0)]),i(I,{class:"px-9 min-w-52 justify-center",disabled:a(_)==="pending",onClick:et},{default:c(()=>[...e[9]||(e[9]=[D("Checkout",-1)])]),_:1},8,["disabled"])])])]}),_:1},8,["ui"]),i(st,{modelValue:a(C),"onUpdate:modelValue":e[2]||(e[2]=d=>W(C)?C.value=d:null)},null,8,["modelValue"])],64)):(m(),h("div",Dt,[i(y,{name:"heroicons:archive-box-x-mark",class:"w-36 h-36 text-black/30"}),e[4]||(e[4]=t("p",{class:"text-2xl text-black/30 text-center"}," Tidak ada Produk di Keranjang ",-1))]))],64))]}),_:1})}}},$e=Y(Jt,[["__scopeId","data-v-1619e0f4"]]);export{$e as default};
