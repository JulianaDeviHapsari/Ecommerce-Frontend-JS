import{_ as j,c as y,o as f,q as N,I as K,s as G,f as L,a as i,b as r,i as I,x as R,t as D,w as m,g as u,k as Z,z as q,r as E,h as S,F as H,p as J,d as A}from"./BVdw5vJQ.js";import{_ as X}from"./BrHeijYS.js";import{_ as Q}from"./C_ZdkJcR.js";import{_ as W}from"./BnWJvLOa.js";import{_ as Y}from"./0-e7FVdg.js";import{_ as ee}from"./Cpznx1_E.js";import{_ as oe}from"./DF4dXhcg.js";import{u as z,r as F,m as te,a as T}from"./COQxO7zj.js";import{u as ae}from"./C4HB1ECi.js";import{u as O}from"./DOzJKxRB.js";import{_ as se}from"./p7QnFScQ.js";import{_ as ne}from"./DE8bu4_G.js";import{b as ie}from"./CCYVfaL6.js";const re={},le={width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function pe(_,o){return f(),y("svg",le,[...o[0]||(o[0]=[N('<path d="M9.99948 20.6767C15.4487 20.6767 19.8661 16.2592 19.8661 10.81C19.8661 5.36082 15.4487 0.943359 9.99948 0.943359C4.55027 0.943359 0.132812 5.36082 0.132812 10.81C0.132812 16.2592 4.55027 20.6767 9.99948 20.6767Z" fill="url(#paint0_linear_7_4351)"></path><path d="M9.99948 1.34336C15.1995 1.34336 19.4661 5.61003 19.4661 10.81C19.4661 16.01 15.1995 20.2767 9.99948 20.2767C4.79948 20.2767 0.532813 16.01 0.532813 10.81C0.532813 5.61003 4.79948 1.34336 9.99948 1.34336ZM9.99948 0.943359C4.53281 0.943359 0.132812 5.34336 0.132812 10.81C0.132812 16.2767 4.53281 20.6767 9.99948 20.6767C15.4661 20.6767 19.8661 16.2767 19.8661 10.81C19.8661 5.34336 15.4661 0.943359 9.99948 0.943359Z" fill="url(#paint1_linear_7_4351)"></path><path d="M19.1988 11.076C19.1988 10.9427 19.1988 10.9427 19.1988 10.8094C19.1988 5.74271 15.0655 1.60938 9.99883 1.60938C4.93216 1.60938 0.798828 5.74271 0.798828 10.8094V11.076C0.932161 6.14271 4.93216 2.14271 9.99883 2.14271C15.0655 2.14271 19.0655 6.14271 19.1988 11.076Z" fill="#FFF5C9"></path><path d="M10.0003 17.8775C13.9031 17.8775 17.0669 14.7136 17.0669 10.8108C17.0669 6.908 13.9031 3.74414 10.0003 3.74414C6.09745 3.74414 2.93359 6.908 2.93359 10.8108C2.93359 14.7136 6.09745 17.8775 10.0003 17.8775Z" fill="url(#paint2_linear_7_4351)"></path><path d="M15.1987 6.14258C16.6654 7.47591 17.5987 9.34258 17.5987 11.3426C17.5987 15.2092 14.3987 18.4092 10.532 18.4092C8.3987 18.4092 6.53203 17.4759 5.33203 16.0092C6.53203 17.0759 8.26536 17.8759 9.9987 17.8759C13.8654 17.8759 17.0654 14.6759 17.0654 10.8092C17.0654 8.94258 16.3987 7.34258 15.1987 6.14258Z" fill="#FFEEAD"></path><path d="M15.2003 6.14414C13.8669 4.67747 12.0003 3.74414 10.0003 3.74414C6.13359 3.74414 2.93359 6.94414 2.93359 10.8108C2.93359 12.9441 3.86693 14.8108 5.33359 16.0108C4.26693 14.8108 3.46693 13.0775 3.46693 11.3441C3.46693 7.47747 6.66693 4.27747 10.5336 4.27747C12.4003 4.27747 14.0003 4.94414 15.2003 6.14414Z" fill="#C97201"></path><path d="M8.26695 7.20955C7.60028 7.74289 7.46695 8.67622 7.60028 9.47622C7.73361 10.1429 8.26695 10.8096 9.06695 11.2096C10.0003 11.7429 12.2669 12.2762 12.2669 13.4762C12.2669 13.7429 12.1336 14.1429 12.0003 14.2762C11.6003 14.8096 10.9336 14.9429 10.2669 14.9429C9.86695 14.9429 9.33361 14.8096 8.93361 14.6762C8.53361 14.5429 8.13361 14.2762 7.73361 14.0096C7.46695 13.8762 7.20028 14.0096 7.06695 14.1429C6.93361 14.4096 7.06695 14.6762 7.20028 14.8096C7.86695 15.3429 8.53361 15.7429 9.46695 15.8762C10.2669 16.0096 11.2003 16.0096 11.8669 15.6096C12.5336 15.3429 13.0669 14.8096 13.2003 14.0096C13.3336 13.2096 13.0669 12.4096 12.5336 11.8762C11.8669 11.2096 9.86695 10.5429 9.33361 10.1429C8.93361 9.87622 8.53361 9.47622 8.53361 8.80955C8.66695 8.00955 9.20028 7.60955 10.0003 7.60955C10.6669 7.60955 11.4669 7.74289 12.1336 8.14289C12.6669 8.54289 13.2003 7.60955 12.6669 7.20955C11.3336 6.40955 9.33361 6.27622 8.26695 7.20955Z" fill="#C67830"></path><path d="M8.13218 6.80916C7.46551 7.3425 7.33218 8.27583 7.46551 9.07583C7.59885 9.7425 8.13218 10.4092 8.93218 10.8092C9.86551 11.3425 12.1322 11.8758 12.1322 13.0758C12.1322 13.3425 11.9988 13.7425 11.8655 13.8758C11.4655 14.4092 10.7988 14.5425 10.1322 14.5425C9.73218 14.5425 9.19885 14.4092 8.79885 14.2758C8.39885 14.1425 7.99885 13.8758 7.59885 13.6092C7.33218 13.4758 7.06551 13.6092 6.93218 13.7425C6.79885 14.0092 6.93218 14.2758 7.06552 14.4092C7.73218 14.9425 8.39885 15.3425 9.33218 15.4758C10.1322 15.6092 11.0655 15.6092 11.7322 15.2092C12.3988 14.9425 12.9322 14.4092 13.0655 13.6092C13.1988 12.8092 12.7988 12.0092 12.2655 11.4758C11.5988 10.8092 9.73218 10.1425 9.19885 9.7425C8.79885 9.47583 8.39885 9.07583 8.39885 8.40916C8.53218 7.60916 9.06552 7.20916 9.86552 7.20916C10.5322 7.20916 11.3322 7.34249 11.9988 7.74249C12.5322 8.14249 13.0655 7.20916 12.5322 6.80916C11.1988 6.00916 9.19885 5.87583 8.13218 6.80916Z" fill="url(#paint3_linear_7_4351)"></path><defs><linearGradient id="paint0_linear_7_4351" x1="3.95868" y1="3.07816" x2="16.0591" y2="18.566" gradientUnits="userSpaceOnUse"><stop stop-color="#F6C430"></stop><stop offset="0.5281" stop-color="#FFECAA"></stop><stop offset="0.6639" stop-color="#FDDE82"></stop><stop offset="0.9673" stop-color="#F7BC1E"></stop><stop offset="1" stop-color="#F6B813"></stop></linearGradient><linearGradient id="paint1_linear_7_4351" x1="9.99948" y1="0.998959" x2="9.99948" y2="20.6526" gradientUnits="userSpaceOnUse"><stop stop-color="#E49B00"></stop><stop offset="0.9416" stop-color="#D67B00"></stop><stop offset="1" stop-color="#D57900"></stop></linearGradient><linearGradient id="paint2_linear_7_4351" x1="5.45786" y1="5.39734" x2="14.5427" y2="16.2244" gradientUnits="userSpaceOnUse"><stop stop-color="#F99D00"></stop><stop offset="0.1752" stop-color="#EEA10B"></stop><stop offset="0.5066" stop-color="#FCD21F"></stop><stop offset="0.6657" stop-color="#F2BA10"></stop><stop offset="1" stop-color="#D57900"></stop></linearGradient><linearGradient id="paint3_linear_7_4351" x1="7.22605" y1="7.5329" x2="12.9827" y2="14.3932" gradientUnits="userSpaceOnUse"><stop stop-color="#FFEC88"></stop><stop offset="0.5003" stop-color="#FDF4CB"></stop><stop offset="0.7556" stop-color="#FCEBA4"></stop><stop offset="1" stop-color="#FAE17A"></stop></linearGradient></defs>',9)])])}const de=j(re,[["render",pe]]),ue={class:"space-y-5 mt-8"},me={class:"border border-yellow-500 bg-yellow-50 rounded-sm py-2 px-3 flex gap-2"},ce={class:"flex gap-2 items-center"},fe={key:0},_e={class:"bg-gray-100 px-6 py-3 rounded-sm space-y-3"},Ce={class:"flex gap-2 items-start"},ve={class:"space-y-4"},ge={class:"flex gap-2 items-center"},xe={__name:"Item",props:K({item:{type:Object,default:()=>({})}},{modelValue:{type:Object,default:()=>({rating:0,courierRating:0,description:"",photo:[],video:[],showUsername:!1})},modelModifiers:{}}),emits:["update:modelValue"],setup(_){const o=G(_,"modelValue"),V={rating:{minValue:T(1),required:F},courierRating:{minValue:T(1),required:F},description:{minLength:te(50),required:F},photo:{},video:{}},g=z(V,o,{$autoDirty:!0,$scope:"review"}),{maskText:C}=ae(),v=O(),p=L(()=>`Username yang akan ditampilkan adalah ${C(v.profile.username,1,1)}`),c=["Sangat Buruk","Buruk","Biasa","Baik","Sangat Baik"];return(B,t)=>{var l,d;const w=de,x=X,h=Q,U=W,b=Y,a=Z,e=ee,n=oe;return f(),y("div",ue,[i("div",me,[r(w),t[6]||(t[6]=i("span",{class:"font-medium"},"Beri penilaian & dapatkan 25 Koin!",-1))]),r(x,{"hide-price":"","hide-description":"",size:"sm",item:_.item},null,8,["item"]),i("div",ce,[t[7]||(t[7]=i("span",{class:"w-44"},"Kualitas Produk",-1)),r(h,{modelValue:o.value.rating,"onUpdate:modelValue":t[0]||(t[0]=s=>o.value.rating=s),size:"lg",color:"yellow"},null,8,["modelValue"]),i("span",{class:R({"text-yellow-500":o.value.rating>3,"text-black/55":o.value.rating<=3})},D(c[o.value.rating-1]),3)]),o.value.rating?(f(),y("div",fe,[i("div",_e,[r(b,{error:(d=(l=u(g).description.$errors)==null?void 0:l[0])==null?void 0:d.$message},{default:m(()=>[r(U,{modelValue:o.value.description,"onUpdate:modelValue":t[1]||(t[1]=s=>o.value.description=s),placeholder:"Bagikan penilaianmu tentang produk ini untuk membantu Pembeli lain."},null,8,["modelValue"])]),_:1},8,["error"]),i("div",Ce,[r(e,{modelValue:o.value.photo,"onUpdate:modelValue":t[2]||(t[2]=s=>o.value.photo=s),max:2,class:"items-start !gap-2 flex-row-reverse"},{activator:m(({onChooseFile:s})=>[r(a,{size:"xs",variant:"soft",icon:"i-heroicons:camera-solid",label:"Tambah Foto",onClick:s},null,8,["onClick"])]),_:1},8,["modelValue"]),r(e,{modelValue:o.value.video,"onUpdate:modelValue":t[3]||(t[3]=s=>o.value.video=s),max:1,class:"items-start !gap-2 flex-row-reverse",type:"video"},{activator:m(({onChooseFile:s})=>[r(a,{size:"xs",variant:"soft",icon:"i-heroicons:video-camera-solid",label:"Tambahkan video",onClick:s},null,8,["onClick"])]),_:1},8,["modelValue"])]),t[8]||(t[8]=i("p",{class:"text-right text-black/55"}," Tambahkan 50 karakter dengan 1 foto untuk mendapatkan 25 Koin! ",-1))])])):I("",!0),r(n,{modelValue:o.value.showUsername,"onUpdate:modelValue":t[4]||(t[4]=s=>o.value.showUsername=s),label:"Tampilkan username pada penilaian",help:u(p)},null,8,["modelValue","help"]),i("div",ve,[t[10]||(t[10]=i("p",{class:"text-base"},"Tentang Layanan",-1)),i("div",ge,[t[9]||(t[9]=i("span",{class:"w-44"},"Kecepatan Jasa Kirim",-1)),r(h,{modelValue:o.value.courierRating,"onUpdate:modelValue":t[5]||(t[5]=s=>o.value.courierRating=s),size:"lg",color:"yellow"},null,8,["modelValue"]),i("span",{class:R({"text-yellow-500":o.value.courierRating>3,"text-black/55":o.value.courierRating<=3})},D(c[o.value.courierRating-1]),3)])])])}}},he={class:"flex justify-end gap-2 pt-6"},Se={__name:"Review",props:{open:{type:Boolean,default:!1},openModifiers:{}},emits:["update:open"],setup(_,{expose:o}){const V=O(),g=q(),C=G(_,"open"),v=E({}),p=E([{uuid:"",rating:0,courierRating:0,description:"",photo:[],video:[],showUsername:!1}]),c=z({},p,{$scope:"review"});function B(a){var e;a&&typeof a=="object"&&(v.value=a,p.value=(e=v.value.items)==null?void 0:e.map(n=>({uuid:n.uuid,rating:0,courierRating:0,description:"",photo:[],video:[],showUsername:!1})))}function t(){p.value=[{uuid:"",rating:0,courierRating:0,description:"",photo:[],video:[],showUsername:!1}],c.value.$reset(),C.value=!1}const{execute:w,status:x,error:h}=ie(()=>Promise.all(p.value.map(a=>b(a))),{immediate:!1},"$CLkXrspHra");async function U(){var e,n,l;if(!await c.value.$validate()){g.add({color:"red",title:(l=(n=(e=c.value.$errors)==null?void 0:e[0])==null?void 0:n.$message)==null?void 0:l.replace("value","rating")});return}await w(),!h.value&&(emit("success"),t())}async function b(a){const e=new FormData;return e.append("order_item_uuid",a==null?void 0:a.uuid),e.append("star_seller",a.rating),e.append("star_courier",a.courierRating),e.append("description",a.description),a.photo.forEach(n=>{e.append("attachments[]",n)}),a.video.forEach(n=>{e.append("attachments[]",n)}),e.append("show_username",a.showUsername?1:0),$fetch("/server/api/order/review/add",{method:"POST",body:e,headers:{Authorization:`Bearer ${V.token}`},onResponseError({response:n}){var l,d;(d=(l=n._data.meta)==null?void 0:l.messages)!=null&&d[0]&&g.add({color:"red",title:n._data.meta.messages[0]})},retry:!1})}return o({setDefaultData:B}),(a,e)=>{const n=xe,l=Z,d=se,s=ne;return f(),S(s,{modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=k=>C.value=k),"prevent-close":""},{default:m(()=>[r(d,{class:"text-black/85 text-sm"},{default:m(()=>{var k;return[e[3]||(e[3]=i("p",{class:"text-xl font-normal"},"Nilai Produk",-1)),(f(!0),y(H,null,J((k=u(v))==null?void 0:k.items,($,M)=>(f(),S(n,{key:$.uuid,modelValue:u(p)[M],"onUpdate:modelValue":P=>u(p)[M]=P,item:$},null,8,["modelValue","onUpdate:modelValue","item"]))),128)),i("div",he,[r(l,{class:"min-w-36 justify-center",variant:"link",color:"gray",disabled:u(x)==="pending",onClick:t},{default:m(()=>[...e[1]||(e[1]=[A(" Nanti Saja ",-1)])]),_:1},8,["disabled"]),r(l,{class:"min-w-36 justify-center",loading:u(x)==="pending",onClick:U},{default:m(()=>[...e[2]||(e[2]=[A(" Ok ",-1)])]),_:1},8,["loading"])])]}),_:1})]),_:1},8,["modelValue"])}}};export{Se as _};
