import{l as z,m as H,r as k,f as p,c as N,a as n,b as l,w as m,o as U,k as K,i as J,g as t,t as g,d as L}from"./BVdw5vJQ.js";import{_ as M}from"./D_Ip9zNA.js";import{_ as O}from"./Cm2tcYAv.js";import{_ as q}from"./D0T0ISyS.js";import{_ as G}from"./p7QnFScQ.js";import{f as Q}from"./CX-HCZMl.js";import{u as V,r as W}from"./CCYVfaL6.js";import{u as X}from"./BFX_Otd8.js";import"./BSNo9jaY.js";import"./Bm92f-5u.js";import"./CxIZtCgj.js";import"./C97eXVNd.js";import"./C0tuFO62.js";import"./DOwuRLCg.js";import"./Dq2jcSPC.js";import"./C9URDrvn.js";import"./9dOsKKNX.js";import"./BwKW8Zfl.js";import"./f51bCrOI.js";import"./DF4dXhcg.js";import"./BkpUadhd.js";import"./DOzJKxRB.js";const Y={class:"space-y-9"},Z={class:"flex justify-between items-center gap-2"},ee={class:"space-y-6"},te={class:"flex gap-4 items-center"},ae={key:0,class:"text-lg font-medium"},oe={class:"flex gap-2"},ne=["src"],se={class:"flex flex-col items-start gap-0.5"},le={class:"text-sm font-medium"},ie={class:"text-sm text-black/65"},re={class:"flex flex-col gap-1"},Be={__name:"index",setup(de){const b=z(),D=H(),i=k({search:void 0,category:void 0}),r=k({page:1,per_page:10}),d=k(),P=[{key:"name",label:"Produk"},{key:"sale_count",label:"Penjualan"},{key:"price",label:"Harga"},{key:"stock",label:"Stok"},{key:"action",label:"Aksi"}],{data:S,status:h}=V("/server/api/category",{key:"category-list",transform(e){return((e==null?void 0:e.data)||[]).reduce((a,s)=>(a.push(...s.childs.map(u=>({...u,icon:s.icon,name:`${s.name} - ${u.name}`}))),a),[])},getCachedData(){var e,a;return((e=b.payload.data)==null?void 0:e["category-list"])||((a=b.static.data)==null?void 0:a["category-list"])}}),{data:_,status:x,execute:f}=V("/server/api/seller-dashboard/product",{key:"product-seller",params:p(()=>({...r.value,...i.value})),transform(e){return(e==null?void 0:e.data)||{}},watch:!1}),{execute:$,status:y}=X(p(()=>`/server/api/seller-dashboard/product/${d.value}`),{method:"DELETE",onResponse({response:e}){e.ok&&(W("product-seller"),d.value=null)}}),A=p(()=>{var e;return(e=S.value)==null?void 0:e.map(a=>({...a,icon:void 0}))}),B=p(()=>{var e;return((e=_.value)==null?void 0:e.data)||[]});function T(e){D.push({path:`/seller/product/edit/${e.uuid}`,state:{product:JSON.stringify(e)}})}function w(e){window.confirm("Anda yakin untuk menghapus produk ini?")&&(d.value=e.uuid,$())}function E(){r.value.page=1,f()}function I(){r.value.page=1,i.value={search:void 0,category:void 0},f()}return(e,a)=>{const s=K,u=M,j=O,F=q,R=G;return U(),N("div",Y,[n("div",Z,[a[3]||(a[3]=n("h3",{class:"font-medium text-xl"},"Produk Saya",-1)),l(s,{icon:"i-heroicons:plus",label:"Tambah Produk Baru",to:"/seller/product/add"})]),l(R,null,{default:m(()=>{var v,C;return[n("div",ee,[n("div",te,[l(u,{modelValue:t(i).search,"onUpdate:modelValue":a[0]||(a[0]=o=>t(i).search=o),"leading-icon":"i-heroicons:magnifying-glass",class:"flex-1",placeholder:"Cari Nama Produk, SKU Induk, Kode Variasi, ID Produk"},null,8,["modelValue"]),l(j,{modelValue:t(i).category,"onUpdate:modelValue":a[1]||(a[1]=o=>t(i).category=o),options:t(A),placeholder:"Cari berdasarkan kategori",class:"flex-1",loading:t(h)==="pending",disabled:t(h)==="pending","value-attribute":"slug","option-attribute":"name"},null,8,["modelValue","options","loading","disabled"]),l(s,{size:"xs",label:"Terapkan",variant:"outline",onClick:E}),l(s,{size:"xs",label:"Atur Ulang",color:"white",onClick:I})]),t(x)!=="pending"?(U(),N("p",ae,g(((v=t(_))==null?void 0:v.total)||0)+" Produk ",1)):J("",!0),l(F,{page:t(r).page,"onUpdate:page":[a[2]||(a[2]=o=>t(r).page=o),t(f)],columns:P,rows:t(B),"empty-text":"Produk Tidak Ditemukan",loading:t(x)==="pending",total:(C=t(_))==null?void 0:C.total,"per-page":t(r).per_page},{"name-data":m(({row:o})=>{var c;return[n("div",oe,[n("img",{src:(c=o.images)==null?void 0:c[0],class:"w-14 h-14 object-cover"},null,8,ne),n("div",se,[n("span",le,g(o.name),1),n("span",ie," ID Produk: "+g(o.uuid),1)])])]}),"price-data":m(({row:o})=>[L(" Rp"+g(("formatNumber"in e?e.formatNumber:t(Q))(o.price)),1)]),"action-data":m(({row:o})=>[n("div",re,[l(s,{variant:"link",padded:!1,color:"blue",label:"Ubah",disabled:t(y)==="pending",onClick:c=>T(o)},null,8,["disabled","onClick"]),l(s,{variant:"link",padded:!1,color:"blue",label:"Hapus",loading:t(y)==="pending"&&t(d)===o.uuid,onClick:c=>w(o)},null,8,["loading","onClick"])])]),_:1},8,["page","rows","loading","total","per-page","onUpdate:page"])])]}),_:1})])}}};export{Be as default};
